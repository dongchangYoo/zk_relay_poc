import "hashes/pedersen/512bit.zok" as pedersenhash
import "utils/pack/u32/unpack128.zok" as unpack128
import "utils/pack/u32/pack128.zok" as pack128

def main(u32[3][8] layer2) -> (field[2]):
	u32[2][8] layer1 = [
		pedersenhash([...layer2[0], ...layer2[1]]),
		pedersenhash([...layer2[2], ...layer2[2]])
	]
	u32[8] layer0 = pedersenhash([...layer1[0], ...layer1[1]])
	field res0 = pack128(layer0[0..4])
	field res1 = pack128(layer0[4..8])
	return [res0, res1]